<!-- <md-card> -->
<div class="row" *ngIf="!editMode && !formMode">
    <div class="col-xs-12 col-sm-12 col-md-12 col-lg-12">
        <h4>Service Point Village Mapping</h4>
    </div>


    <form #searForm="ngForm" autocomplete="off">
        <div class="col-xs-12 col-sm-6 col-md-4 col-lg-3">
            <md-input-container class="hide_underline" [style.width]="'100%'">
                <input mdInput style="display:none">
                <md-select required name="Services" placeholder="Serviceline" [style.width]="'100%'" [(ngModel)]="serviceline" (change)="getStates(serviceline.serviceID)">
                    <md-option *ngFor="let item of services_array" [value]="item">
                        {{item.serviceName}}
                    </md-option>
                </md-select>
            </md-input-container>
        </div>
        <div class="col-xs-12 col-sm-6 col-md-4 col-lg-3">
            <md-input-container class="hide_underline" [style.width]="'100%'">
                <input mdInput style="display:none">
                <md-select required placeholder="State" [style.width]="'100%'" [(ngModel)]="searchStateID" name="searchStateID" (change)="getDistricts(searchStateID.stateID);resetform1.reset();">
                    <md-option *ngFor="let state of provider_states" [value]="state">
                        {{state.stateName}}
                    </md-option>
                </md-select>
            </md-input-container>
        </div>
        <form #resetform="ngForm">
            <div class="col-xs-12 col-sm-6 col-md-4 col-lg-3">
                <md-input-container class="hide_underline width100">
                    <input mdInput style="display:none">
                    <md-select required placeholder="District" class="width100" [(ngModel)]="searchDistrictID" name="searchDistrictID" #districtV="ngModel"
                        (change)="getParkingPlaces(searchStateID.stateID,searchDistrictID.districtID);resetform1.reset();">
                        <md-option *ngFor=" let district of districts " [value]="district ">
                            {{district.districtName}}
                        </md-option>
                    </md-select>
                </md-input-container>
            </div>
        </form>
        <form #resetform1="ngForm">
            <div class="col-xs-12 col-sm-6 col-md-4 col-lg-3 ">
                <md-input-container class="hide_underline width100 ">
                    <input mdInput style="display:none ">
                    <md-select required placeholder="Parking Place " class="width100 " [(ngModel)]="searchParkingPlaceID
                                            " name="searchParkingPlaceID " (change)="GetBranches(searchParkingPlaceID.districtBlockID);getServicePoints(searchStateID.stateID,searchDistrictID.districtID,searchParkingPlaceID.parkingPlaceID);"
                        #stateVal="ngModel">
                        <md-option *ngFor="let parkingPlace of availableParkingPlaces" [value]="parkingPlace">
                            {{parkingPlace.parkingPlaceName}}
                        </md-option>
                    </md-select>
                </md-input-container>
            </div>
            <div class="col-xs-12 col-sm-6 col-md-4 col-lg-3">
                <md-input-container class="hide_underline width100">
                    <input mdInput style="display:none">
                    <md-select required placeholder="Service Point" class="width100" [(ngModel)]="searchServicePointID" name="searchServicePointID"
                        #districtV="ngModel" (change)="getServicePointVillageMaps(searchStateID.stateID,searchDistrictID.districtID,searchParkingPlaceID.parkingPlaceID,searchServicePointID.servicePointID);">
                        <md-option *ngFor="let servicePoint of availableServicePoints" [value]="servicePoint">
                            {{servicePoint.servicePointName}}
                        </md-option>
                    </md-select>
                </md-input-container>
            </div>
        </form>
    </form>
</div>
<div>
    <!-- <div class="pull-right m-t-15" *ngIf="showServicePointVillageMaps && availableServicePointVillageMaps.length!==0 ">
        <md-input-container id="filterbox">
            <input mdInput placeholder="In-Table Village Search" #filterTerm (keyup)="filterComponentList(filterTerm.value)">
            <md-icon mdSuffix>search</md-icon>
        </md-input-container>
    </div> -->
</div>
<div class="row" *ngIf="showServicePointVillageMaps">
    <div class="col-xs-12 col-sm-12 col-md-12 col-lg-12">
        <h4>Available Service Point Village Mappings</h4>
    </div>
    <div class="col-xs-12 col-sm-12 col-md-12 col-lg-12 m-t-15">
        <div class="table-responsive">
            <table class="table table-striped table-hover" [md2Data]="filteredavailableServicePointVillageMaps" #md2="md2DataTable" [rowsPerPage]="4">
                <thead>
                    <tr>
                        <th width="5%">S.No.</th>
                        <th width="25%">State</th>
                        <th width="25%">District</th>
                        <th width="22%">Parking Place</th>
                        <th width="22%">Service Point</th>
                        <th width="22%">Village</th>
                        <th width="15%">Edit</th>
                        <th width="15%">Action</th>
                    </tr>
                </thead>
                <tbody>
                    <tr *ngIf="md2.data.length == 0">
                        <td colspan="8" class="record-not-found">No records found</td>
                    </tr>
                    <tr style="cursor: pointer" *ngFor="let servicePointVillageMap of md2.data; let i= index">
                        <td>{{filteredavailableServicePointVillageMaps.indexOf(servicePointVillageMap)+1}} </td>
                        <td>{{servicePointVillageMap.m_providerServiceMapping.state.stateName}}</td>
                        <td>{{servicePointVillageMap.m_providerServiceMapping.m_district.districtName}}</td>
                        <td>{{servicePointVillageMap.m_servicepoint.parkingPlaceName}}</td>
                        <td>{{servicePointVillageMap.m_servicepoint.servicePointName}}</td>
                        <td>{{servicePointVillageMap.villageName}}</td>
                        <td>
                            <md-icon mdTooltip="Edit" class="mat-icon material-icons" *ngIf="!servicePointVillageMap.deleted" role="img" aria-hidden="true"
                                style="cursor: pointer" (click)="editServiceVillageMapping(servicePointVillageMap)">edit</md-icon>
                        </td>
                        <td>
                            <button *ngIf="servicePointVillageMap.deleted=='1'" md-raised-button color="accent" (click)="updateServicePointVillageMapStatus(servicePointVillageMap)">Activate</button>
                            <button *ngIf="servicePointVillageMap.deleted=='0'" md-raised-button color="primary" (click)="updateServicePointVillageMapStatus(servicePointVillageMap)">Deactivate</button>
                        </td>
                    </tr>
                </tbody>
                <tfoot>
                    <tr>
                        <td colspan="4">
                            <md2-pagination></md2-pagination>
                        </td>
                        <td colspan="4" class="p-r-0 m-t-10">
                            <button md-raised-button color="primary" class="pull-right" [disabled]="!createButton" (click)="showForm()">Add Service Point </button>
                        </td>
                    </tr>
                </tfoot>
            </table>
        </div>
    </div>

</div>
<div class="row" *ngIf="formMode">
    <div class="col-xs-12 col-sm-12 col-md-12 col-lg-12">
        <h4>Create Service Point Village Mapping</h4>
    </div>


    <form #servicePointVillageMapForm="ngForm" autocomplete="off">

        <div class="col-xs-12 col-sm-6 col-md-4 col-lg-3">
            <md-input-container class="hide_underline" [style.width]="'100%'">
                <input mdInput style="display:none">
                <md-select required name="Services" [disabled]="true" placeholder="Serviceline" [style.width]="'100%'" [(ngModel)]="serviceline"
                    (change)="getStates(serviceline.serviceID)">
                    <md-option *ngFor="let item of services_array" [value]="item">
                        {{item.serviceName}}
                    </md-option>
                </md-select>
            </md-input-container>
        </div>
        <div class="col-xs-12 col-sm-6 col-md-4 col-lg-3">
            <md-input-container class="hide_underline" [style.width]="'100%'">
                <input mdInput style="display:none">
                <md-select required placeholder="State" [disabled]="true" [style.width]="'100%'" [(ngModel)]="searchStateID" name="searchStateID"
                    (change)="getDistricts(searchStateID.stateID);">
                    <md-option *ngFor="let state of provider_states" [value]="state">
                        {{state.stateName}}
                    </md-option>
                </md-select>
            </md-input-container>
        </div>
        <div class="col-xs-12 col-sm-6 col-md-4 col-lg-3">
            <md-input-container class="hide_underline width100">
                <input mdInput style="display:none">
                <md-select required placeholder="District" [disabled]="true" class="width100" [(ngModel)]="searchDistrictID" name="searchDistrictID"
                    #districtV="ngModel" (change)="getParkingPlaces(searchStateID,searchDistrictID);">
                    <md-option *ngFor=" let district of districts " [value]="district ">
                        {{district.districtName}}
                    </md-option>
                </md-select>
            </md-input-container>
        </div>
        <div class="col-xs-12 col-sm-6 col-md-4 col-lg-3 ">
            <md-input-container class="hide_underline width100 ">
                <input mdInput style="display:none ">
                <md-select required placeholder="Parking Place " [disabled]="true" class="width100 " [(ngModel)]="searchParkingPlaceID
                                                " name="searchParkingPlaceID " (change)="getServicePoints(searchStateID,searchDistrictID,searchParkingPlaceID);"
                    #stateVal="ngModel">
                    <md-option *ngFor="let parkingPlace of availableParkingPlaces" [value]="parkingPlace">
                        {{parkingPlace.parkingPlaceName}}
                    </md-option>
                </md-select>
            </md-input-container>
        </div>
        <div class="col-xs-12 col-sm-6 col-md-4 col-lg-3">
            <md-input-container class="hide_underline width100">
                <input mdInput style="display:none">
                <md-select required placeholder="Service Point" [disabled]="true" class="width100" [(ngModel)]="searchServicePointID" (change)="getServicePointVillageMaps(searchStateID.stateID,searchDistrictID.districtID,searchParkingPlaceID.parkingPlaceID,searchServicePointID.servicePointID)"
                    name="searchServicePointID" #districtV="ngModel">
                    <md-option *ngFor="let servicePoint of availableServicePoints" [value]="servicePoint">
                        {{servicePoint.servicePointName}}
                    </md-option>
                </md-select>
            </md-input-container>
        </div>
        <form #servicePointVillage="ngForm" autocomplete="off">
            <div class="col-xs-12 col-sm-6 col-md-4 col-lg-3">
                <md-input-container class="hide_underline width100">
                    <input mdInput style="display:none">
                    <md-select multiple required placeholder="Village" class="width100" [(ngModel)]="villageIdList" name="villageIdList" #villageN="ngModel">
                        <md-option *ngFor="let branch of branches" value="{{branch.districtBranchID}}-{{branch.villageName}}">
                            {{branch.villageName}}
                        </md-option>
                        <md-hint [hidden]=villageN.valid>
                            <span class="error_text" *ngIf="!villageN.required  && ( villageN.dirty || villageN.touched)">Please select Village</span>
                        </md-hint>
                    </md-select>
                </md-input-container>
            </div>
        </form>
        <div class="col-xs-12 col-sm-12 col-md-12 col-lg-3">
            <button *ngIf="villageN.valid && !editable" md-mini-fab color="primary" class="xs-pull-right sm-pull-right md-pull-right lg-pull-left"
                (click)="addServicePointVillageMapToList(servicePointVillage.value);servicePointVillage.reset(); ">
                <md-icon mdSuffix class="mat-icon material-icons" role="img" aria-hidden="true" style="cursor: pointer">add</md-icon>
            </button>
        </div>
    </form>
    <div class="col-xs-12 col-sm-12 col-md-12 col-lg-12 m-t-15" *ngIf="servicePointVillageMapList.length>0 && !editMode">
        <div class="table-responsive">
            <table class="table table-striped table-hover" [md2Data]="servicePointVillageMapList" #md2="md2DataTable" [rowsPerPage]="3">
                <thead>
                    <tr>
                        <th>S.No.</th>
                        <th>State</th>
                        <th>District</th>
                        <th>Parking Place</th>
                        <th>Service Point</th>
                        <th>Village</th>
                        <th>Action</th>
                    </tr>
                </thead>
                <tbody>
                    <tr *ngIf="servicePointVillageMapList.length == 0">
                        <td colspan="7" class="record-not-found">No records found</td>
                    </tr>
                    <tr *ngFor="let servicePointVillageMap of md2.data; let i=index">
                        <td>{{servicePointVillageMapList.indexOf(servicePointVillageMap)+1}}</td>
                        <td>{{servicePointVillageMap.stateName}}</td>
                        <td>{{servicePointVillageMap.districtName}}</td>
                        <td>{{servicePointVillageMap.parkingPlaceName}}</td>
                        <td>{{servicePointVillageMap.servicePointName}}</td>
                        <td>{{servicePointVillageMap.villageName}}</td>
                        <td>
                            <md-icon class="cursorPointer" mdTooltip="delete" (click)=" remove_obj(servicePointVillageMapList.indexOf(servicePointVillageMap))">delete</md-icon>
                        </td>
                    </tr>
                </tbody>
                <tfoot>
                    <tr>
                        <td colspan="7">
                            <md2-pagination></md2-pagination>
                        </td>
                    </tr>
                </tfoot>
            </table>
        </div>
    </div>
    <div class="col-xs-12 col-sm-12 col-md-12 col-lg-12 m-t-10 m-b-10">
        <button md-raised-button color="primary" class="pull-left" *ngIf="!showServicePointVillageMaps || editMode" (click)="back();">Back</button>
        <button [disabled]="servicePointVillageMapList.length == 0 && editMode" *ngIf="!showServicePointVillageMaps" md-raised-button
            color="accent" class="pull-right" (click)="storeServicePointVillageMaps()">Save</button>
    </div>
</div>

<div class="row" *ngIf="editMode">
    <div class="col-xs-12 col-sm-12 col-md-12 col-lg-12">
        <h4>Edit Service Point Village Mapping</h4>
    </div>
    <form #updateServicePointVillageMapForm="ngForm" autocomplete="off">
        <div class="col-xs-12 col-sm-6 col-md-4 col-lg-3">
            <md-input-container class="hide_underline" [style.width]="'100%'">
                <input mdInput style="display:none">
                <md-select required name="Services" [disabled]="true" placeholder="Serviceline" [style.width]="'100%'" [(ngModel)]="serviceline"
                    (change)="getStates(serviceline.serviceID)">
                    <md-option *ngFor="let item of services_array" [value]="item">
                        {{item.serviceName}}
                    </md-option>
                </md-select>
            </md-input-container>
        </div>
        <div class="col-xs-12 col-sm-6 col-md-4 col-lg-3">
            <md-input-container class="hide_underline" [style.width]="'100%'">
                <input mdInput style="display:none">
                <md-select required placeholder="State" [disabled]="true" [style.width]="'100%'" [(ngModel)]="searchStateID" name="searchStateID"
                    (change)="getDistricts(searchStateID.stateID);">
                    <md-option *ngFor="let state of provider_states" [value]="state">
                        {{state.stateName}}
                    </md-option>
                </md-select>
            </md-input-container>
        </div>
        <div class="col-xs-12 col-sm-6 col-md-4 col-lg-3">
            <md-input-container class="hide_underline width100">
                <input mdInput style="display:none">
                <md-select required placeholder="District" [disabled]="true" class="width100" [(ngModel)]="searchDistrictID_edit" name="searchDistrictID"
                    #districtV="ngModel" (change)="getParkingPlaces(searchStateID,searchDistrictID);">
                    <md-option *ngFor=" let district of districts " [value]="district.districtID">
                        {{district.districtName}}
                    </md-option>
                </md-select>
            </md-input-container>
        </div>
        <div class="col-xs-12 col-sm-6 col-md-4 col-lg-3 ">
            <md-input-container class="hide_underline width100 ">
                <input mdInput style="display:none ">
                <md-select required placeholder="Parking Place " [disabled]="true" class="width100 " [(ngModel)]="searchParkingPlaceID_edit
                                                        " name="searchParkingPlaceID " (change)="getServicePoints(searchStateID,searchDistrictID,searchParkingPlaceID);"
                    #stateVal="ngModel">
                    <md-option *ngFor="let parkingPlace of availableParkingPlaces" [value]="parkingPlace.parkingPlaceID">
                        {{parkingPlace.parkingPlaceName}}
                    </md-option>
                </md-select>
            </md-input-container>
        </div>
        <div class="col-xs-12 col-sm-6 col-md-4 col-lg-3">
            <md-input-container class="hide_underline width100">
                <input mdInput style="display:none">
                <md-select required placeholder="Service Point" [disabled]="true" class="width100" [(ngModel)]="searchServicePointID_edit"
                    (change)="getServicePointVillageMaps(searchStateID.stateID,searchDistrictID.districtID,searchParkingPlaceID.parkingPlaceID,searchServicePointID.servicePointID)"
                    name="searchServicePointID" #districtV="ngModel">
                    <md-option *ngFor="let servicePoint of availableServicePoints" [value]="servicePoint.servicePointID">
                        {{servicePoint.servicePointName}}
                    </md-option>
                </md-select>
            </md-input-container>
        </div>
        <form #servicePointVillage1="ngForm" autocomplete="off">
            <div class="col-xs-12 col-sm-6 col-md-4 col-lg-3">
                <md-input-container class="hide_underline width100">
                    <input mdInput style="display:none">
                    <md-select required placeholder="Village" class="width100" [(ngModel)]="villageIdList_edit" name="villageIdList" #villageN="ngModel">
                        <md-option *ngFor="let branch of branches" [value]="branch.districtBranchID">
                            {{branch.villageName}}
                        </md-option>
                        <md-hint [hidden]=villageN.valid>
                            <span class="error_text" *ngIf="!villageN.required  && ( villageN.dirty || villageN.touched)">Please select Village</span>
                        </md-hint>
                    </md-select>
                </md-input-container>
            </div>
        </form>

    </form>
    <div class="col-xs-12 col-sm-12 col-md-12 col-lg-12 m-t-10 m-b-10">
        <button md-raised-button color="primary" class="pull-left" (click)="back();servicePointVillage1.reset();">Back</button>
        <button md-raised-button color="accent" class="pull-right" [disabled]="servicePointVillage1.invalid" (click)="updateStoreServicePointVillageMaps();servicePointVillage1.reset()">Update</button>

    </div>
</div>