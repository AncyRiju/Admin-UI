<!-- <md-card> -->
<div class="row" *ngIf="showServicePointVillageMaps">
    <div class="col-xs-12 col-sm-12 col-md-12 col-lg-12">
        <h4>Search Service Point Village Mappings</h4>
    </div>


    <form #searForm="ngForm">
        <div class="col-xs-12 col-sm-6 col-md-4 col-lg-3">
            <md-input-container class="hide_underline width100">
                <input mdInput style="display:none">
                <md-select placeholder="State" class="width100" [(ngModel)]="searchStateID" name="searchStateID" (change)="getDistricts(searchStateID);getServicePointVillageMaps(searchStateID,searchDistrictID,searchParkingPlaceID,searchServicePointID)"
                    #stateVal="ngModel">
                    <md-option *ngFor="let state of provider_states" [value]="state.stateID">
                        {{state.stateName}}
                    </md-option>
                </md-select>
            </md-input-container>
        </div>
        <div class="col-xs-12 col-sm-6 col-md-4 col-lg-3">
            <md-input-container class="hide_underline width100">
                <input mdInput style="display:none">
                <md-select placeholder="District" class="width100" [(ngModel)]="searchDistrictID" name="searchDistrictID" #districtV="ngModel"
                    (change)="getParkingPlaces(searchStateID,searchDistrictID);getServicePointVillageMaps(searchStateID,searchDistrictID,searchParkingPlaceID,searchServicePointID)">
                    <md-option *ngFor="let district of districts" [value]="district.districtID">
                        {{district.districtName}}
                    </md-option>
                </md-select>
            </md-input-container>
        </div>
        <div class="col-xs-12 col-sm-6 col-md-4 col-lg-3">
            <md-input-container class="hide_underline width100">
                <input mdInput style="display:none">
                <md-select placeholder="Parking Place" class="width100" [(ngModel)]="searchParkingPlaceID" name="searchParkingPlaceID" (change)="getServicePoints(searchStateID,searchDistrictID,searchParkingPlaceID);getServicePointVillageMaps(searchStateID,searchDistrictID,searchParkingPlaceID,searchServicePointID)"
                    #stateVal="ngModel">
                    <md-option *ngFor="let parkingPlace of availableParkingPlaces" [value]="parkingPlace.parkingPlaceID">
                        {{parkingPlace.parkingPlaceName}}
                    </md-option>
                </md-select>
            </md-input-container>
        </div>
        <div class="col-xs-12 col-sm-6 col-md-4 col-lg-3">
            <md-input-container class="hide_underline width100">
                <input mdInput style="display:none">
                <md-select placeholder="Service Point" class="width100" [(ngModel)]="searchServicePointID" name="searchServicePointID" #districtV="ngModel"
                    (change)="getServicePointVillageMaps(searchStateID,searchDistrictID,searchParkingPlaceID,searchServicePointID)">
                    <md-option *ngFor="let servicePoint of availableServicePoints" [value]="servicePoint.servicePointID">
                        {{servicePoint.servicePointName}}
                    </md-option>
                </md-select>
            </md-input-container>
        </div>
        <!-- <button class="btn">
                    <md-icon mdSuffix class="mat-icon material-icons" role="img" aria-hidden="true" style="cursor: pointer" (click)="showList()">clear</md-icon>
                </button> -->
    </form>
</div>

<!-- </div>
</md-card>
<md-card>-->
<div class="row" *ngIf="showServicePointVillageMaps">
    <div class="col-xs-12 col-sm-12 col-md-12 col-lg-12">
        <h4>Available Service Point Village Mappings</h4>
    </div>
    <div class="col-xs-12 col-sm-12 col-md-12 col-lg-12 m-t-15">
        <div class="table-responsive">
            <table class="table table-striped table-hover" [md2Data]="availableServicePointVillageMaps" #md2="md2DataTable" [rowsPerPage]="4">
                <thead>
                    <tr>
                        <th width="5%">S.No.</th>
                        <th width="25%">State</th>
                        <th width="25%">District</th>
                        <th width="25%">Parking Place</th>
                        <th width="25%">Service Point</th>
                        <th width="25%">Village</th>
                        <th width="15%">Action</th>
                    </tr>
                </thead>
                <tbody>
                    <tr style="cursor: pointer" *ngFor="let servicePointVillageMap of md2.data; let i= index">
                        <td>{{availableServicePointVillageMaps.indexOf(servicePointVillageMap)+1}} </td>
                        <td>{{servicePointVillageMap.m_providerServiceMapping.state.stateName}}</td>
                        <td>{{servicePointVillageMap.m_providerServiceMapping.m_district.districtName}}</td>
                        <td>{{servicePointVillageMap.m_servicepoint.parkingPlaceName}}</td>
                        <td>{{servicePointVillageMap.m_servicepoint.servicePointName}}</td>
                        <td>{{servicePointVillageMap.villageName}}</td>
                        <td>
                            <button *ngIf="servicePointVillageMap.deleted=='1'" md-raised-button color="accent" (click)="updateServicePointVillageMapStatus(servicePointVillageMap)">Activate</button>
                            <button *ngIf="servicePointVillageMap.deleted=='0'" md-raised-button color="primary" (click)="updateServicePointVillageMapStatus(servicePointVillageMap)">Deactivate</button>
                        </td>
                    </tr>
                </tbody>
                <tfoot>
                    <tr>
                        <td colspan="4">
                            <md2-pagination></md2-pagination>
                        </td>
                        <td colspan="3" class="p-r-0 m-t-10">
                            <button md-raised-button color="primary" class="pull-right" (click)="showForm()">Add Service Point </button>
                        </td>
                    </tr>
                </tfoot>
            </table>
        </div>
    </div>
    <!-- <pagination-controls (pageChange)="b = $event" id="servicePointVillageMapListResult"></pagination-controls> -->

</div>
<div class="row" *ngIf="!showServicePointVillageMaps">
    <div class="col-xs-12 col-sm-12 col-md-12 col-lg-12">
        <h4>Create Service Point Village Mapping</h4>
    </div>


    <form #servicePointVillageMapForm="ngForm">
        <div class="col-xs-12 col-sm-6 col-md-4 col-lg-3">
            <md-input-container class="hide_underline width100">
                <input mdInput style="display:none">
                <md-select required placeholder="State" class="width100" [(ngModel)]="stateID" name="stateID" (change)="getServices(stateID.split('-')[0]);getDistricts(stateID.split('-')[0])"
                    #stateVal="ngModel">
                    <md-option *ngFor="let item of provider_states" value="{{item.stateID}}-{{item.stateName}}-{{item.providerServiceMapID}}">
                        {{item.stateName}}
                    </md-option>
                    <md-hint [hidden]=stateVal.valid>
                        <span class="error_text" *ngIf="!districtV.required  && ( districtV.dirty || districtV.touched)">Please select State</span>
                    </md-hint>
                </md-select>
            </md-input-container>
        </div>
        <div class="col-xs-12 col-sm-6 col-md-4 col-lg-3">
            <md-input-container class="hide_underline width100">
                <input mdInput style="display:none">
                <md-select required placeholder="District" class="width100" [(ngModel)]="districtID" name="districtID" #districtV="ngModel"
                    (change)="GetTaluks(districtID.split('-')[0]);getParkingPlaces(stateID.split('-')[0],districtID.split('-')[0]);">
                    <md-option *ngFor="let district of districts" value="{{district.districtID}}-{{district.districtName}}">
                        {{district.districtName}}
                    </md-option>
                    <md-hint [hidden]=districtV.valid>
                        <span class="error_text" *ngIf="!districtV.required  && ( districtV.dirty || districtV.touched)">Please select District</span>
                    </md-hint>
                </md-select>
            </md-input-container>
        </div>
        <!--<div class="col-xs-12 col-sm-6 col-md-4 col-lg-3">
                        <md-select placeholder="Taluk/Sub District" class="width100" [(ngModel)]="talukID" name="talukID" (change)="GetBranches(talukID.split('-')[0]);">
                            <md-option *ngFor="let taluk of taluks" value="{{taluk.blockID}}-{{taluk.blockName}}">
                                {{taluk.blockName}}
                            </md-option>
                        </md-select>
                    </div>-->
        <div class="col-xs-12 col-sm-6 col-md-4 col-lg-3">
            <md-input-container class="hide_underline width100">
                <input mdInput style="display:none">
                <md-select required placeholder="Parking Place" class="width100" [(ngModel)]="parkingPlaceID" name="parkingPlaceID" (change)="GetBranches(parkingPlaceID.split('-')[2]);getServicePoints(searchStateID,searchDistrictID,searchParkingPlaceID)"
                    #parkingPlace="ngModel">
                    <md-option *ngFor="let parkingPlace of availableParkingPlaces" value="{{parkingPlace.parkingPlaceID}}-{{parkingPlace.parkingPlaceName}}-{{parkingPlace.districtBlockID}}">
                        {{parkingPlace.parkingPlaceName}}
                    </md-option>
                    <md-hint [hidden]=parkingPlace.valid>
                        <span class="error_text" *ngIf="!parkingPlace.required  && ( parkingPlace.dirty || parkingPlace.touched)">Please select Parking Place</span>
                    </md-hint>
                </md-select>
            </md-input-container>
        </div>
        <!-- <div class="clearfix"></div> -->
        <div class="col-xs-12 col-sm-6 col-md-4 col-lg-3">
            <md-input-container class="hide_underline width100">
                <input mdInput style="display:none">
                <md-select required placeholder="Service Point" class="width100" [(ngModel)]="servicePointID" name="servicePointID" #servicePT="ngModel"
                    (change)="checkExistance(stateID,servicePointID)">
                    <md-option *ngFor="let servicePoint of availableServicePoints" value="{{servicePoint.servicePointID}}-{{servicePoint.servicePointName}}">
                        {{servicePoint.servicePointName}}
                    </md-option>
                    <md-hint [hidden]=servicePT.valid>
                        <span class="error_text" *ngIf="!servicePT.required  && ( servicePT.dirty || servicePT.touched)">Please select Service Point</span>
                    </md-hint>
                </md-select>
            </md-input-container>
        </div>
        <div class="col-xs-12 col-sm-6 col-md-4 col-lg-3">
            <md-input-container class="hide_underline width100">
                <input mdInput style="display:none">
                <md-select multiple required placeholder="Village" class="width100" [(ngModel)]="villageIdList" name="villageIdList" #villageN="ngModel">
                    <md-option *ngFor="let branch of branches" value="{{branch.districtBranchID}}-{{branch.villageName}}">
                        {{branch.villageName}}
                    </md-option>
                    <md-hint [hidden]=villageN.valid>
                        <span class="error_text" *ngIf="!villageN.required  && ( villageN.dirty || villageN.touched)">Please select Village</span>
                    </md-hint>
                </md-select>
            </md-input-container>
        </div>
        <div class="col-xs-12 col-sm-6 col-md-4 col-lg-3">
            <button *ngIf="stateVal.valid && districtV.valid && parkingPlace.valid && servicePT.valid && villageN.valid && !editable"
                md-mini-fab color="primary" class="xs-pull-right sm-pull-left md-pull-left lg-pull-left" (click)="addServicePointVillageMapToList(servicePointVillageMapForm.value);servicePointVillageMapForm.reset()  ">
                <md-icon mdSuffix class="mat-icon material-icons" role="img" aria-hidden="true" style="cursor: pointer">add</md-icon>
            </button>
        </div>
    </form>
</div>
<div class="row" *ngIf="servicePointVillageMapList.length>0">
    <div class="col-xs-12 col-sm-12 col-md-12 col-lg-12 m-t-15">
        <div class="table-responsive">
            <table class="table table-striped table-hover" [md2Data]="servicePointVillageMapList" #md2="md2DataTable" [rowsPerPage]="3">
                <thead>
                    <tr>
                        <th>S.No.</th>
                        <th>State</th>
                        <th>District</th>
                        <th>Parking Place</th>
                        <th>Service Point</th>
                        <th>Village</th>
                        <th>Action</th>
                    </tr>
                </thead>
                <tbody>
                    <tr *ngIf="servicePointVillageMapList.length == 0">
                        <td colspan="7" class="record-not-found">No records found</td>
                    </tr>
                    <tr style="cursor: pointer" *ngFor="let servicePointVillageMap of md2.data; let i=index">
                        <td>{{servicePointVillageMapList.indexOf(servicePointVillageMap)+1}}</td>
                        <td>{{servicePointVillageMap.stateName}}</td>
                        <td>{{servicePointVillageMap.districtName}}</td>
                        <td>{{servicePointVillageMap.parkingPlaceName}}</td>
                        <td>{{servicePointVillageMap.servicePointName}}</td>
                        <td>{{servicePointVillageMap.villageName}}</td>
                        <td>
                            <md-icon mdSuffix class="mat-icon material-icons" role="img" aria-hidden="true" style="cursor: pointer" (click)=" remove_obj(k)">delete</md-icon>
                        </td>
                    </tr>
                </tbody>
                <tfoot>
                    <tr>
                        <td colspan="7">
                            <md2-pagination></md2-pagination>
                        </td>
                    </tr>
                </tfoot>
            </table>
            <!-- <pagination-controls (pageChange)="b = $event" id="servicePointVillageMapResult"></pagination-controls> -->
        </div>
    </div>
</div>
<div class="row">
    <div class="col-xs-12 col-sm-12 col-md-12 col-lg-12">
        <button md-raised-button color="primary" class="pull-left" *ngIf="!showServicePointVillageMaps" (click)="back()">Back</button>
        <button [disabled]="servicePointVillageMapList.length == 0" *ngIf="!showServicePointVillageMaps" md-raised-button color="accent"
            class="pull-right" (click)="storeServicePointVillageMaps()">Save</button>

    </div>

</div>
<!-- </md-card> -->