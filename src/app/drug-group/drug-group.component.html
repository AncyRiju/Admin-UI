<div *ngIf="showDrugGroups && !editable">
  <h4>Available Drug Groups</h4>
  <table class="table ">
    <thead>
      <tr>
        <th>S No.</th>
        <th>Drug Group</th>
        <th>Description</th>
        <th>Edit</th>
        <th>Action</th>
      </tr>
    </thead>
    <tbody>
      <tr style="cursor: pointer" *ngFor="let drugGroup of availableDrugGroups | paginate: {id:'searchResult', itemsPerPage: 3, currentPage: b}" >
        <td>{{availableDrugGroups.indexOf(drugGroup)+1}}</td>
        <td>{{drugGroup.drugGroup}}</td>
        <td>{{drugGroup.drugGroupDesc}}</td>
        <td> <button class="btn activateBtn" (click)="editDrugGroup(drugGroup)">Edit</button></td>
        <td *ngIf="drugGroup.deleted=='0'"> <button class="btn" (click)="updateDrugGroupStatus(drugGroup)">Deactivate</button></td>
        <td *ngIf="drugGroup.deleted=='1'"> <button class="btn activateBtn" (click)="updateDrugGroupStatus(drugGroup)">Activate</button></td>
       
      </tr>
    </tbody>
  </table>
  <pagination-controls (pageChange)="b = $event" id="searchResult"></pagination-controls>
  <div>
    <button class="btn pull-right " (click)="showForm()">Add Drug Group</button>
  </div>
</div>
<div *ngIf="!showDrugGroups || editable">
  <h4>Create Drug Group</h4>
  <form #drugGroupForm="ngForm">
    <input mdInput style="display:none;" [(ngModel)]="drugGroupID" name="drugGroupID" >
    <div class="col-xs-12 col-sm-12 col-md-6 col-lg-3">
      <md-input-container [style.width]="'100%'">
        <input mdInput required placeholder="Drug Group " [(ngModel)]="drugGroup" name="drugGroup" #drugG="ngModel" (blur)="checkExistance(drugGroup)" minlength="1" maxlength="30">
        <md-hint>
          <span class="error_text" *ngIf="!drugG.valid  && ( drugG.dirty || drugG.touched)">Please enter drug Group Name</span>
          <span class="error_text" *ngIf="groupNameExist">Drug Group Already Exists</span>
        </md-hint>
      </md-input-container>
    </div>
    <div class="col-xs-12 col-sm-12 col-md-6 col-lg-3">
      <md-input-container [style.width]="'100%'">
        <input mdInput required placeholder="Drug Group Description" [(ngModel)]="drugGroupDesc" name="drugGroupDesc"  #drugD="ngModel" minlength="1" maxlength="100">
        <md-hint [hidden]=drugD.valid>
          <span class="error_text" *ngIf="!drugD.required  && ( drugD.dirty || drugD.touched)">Please enter drug Group Description</span>
        </md-hint>
      </md-input-container>
    </div>
    <div class="col-xs-12 col-sm-12 col-md-6 col-lg-3">
      <button *ngIf="!editable" [disabled]=" !drugG.valid || groupNameExist || !drugD.valid " class="btn pull-right " (click)="addDrugGroupToList(drugGroupForm.value);drugGroupForm.reset() ">
        <md-icon  mdSuffix class="mat-icon material-icons" role="img" aria-hidden="true" style="cursor: pointer">add</md-icon>
      </button>
      <button *ngIf="editable"  class="btn pull-right " (click)="updateDrugGroup(drugGroupForm.value);drugGroupForm.reset()  ">
        <md-icon mdSuffix class="mat-icon material-icons" role="img" aria-hidden="true" style="cursor: pointer">update</md-icon>
      </button>
    </div>
  </form>
  <div *ngIf="drugGroupList.length>0">
    <table class="table ">
      <thead>
        <tr>
          <th>S No.</th>
          <th>Drug Group</th>
          <th>Description</th>
        </tr>
      </thead>
      <tbody>
        <tr style="cursor: pointer" *ngFor="let drugGroup of drugGroupList | paginate: {id:'groupsList', itemsPerPage: 3, currentPage: b}">
          <td>{{drugGroupList.indexOf(drugGroup)+1}}</td>
          <td>{{drugGroup.drugGroup}}</td>
          <td>{{drugGroup.drugGroupDesc}}</td>
        </tr>
      </tbody>
    </table>
    <pagination-controls (pageChange)="b = $event" id="groupsList"></pagination-controls>
  </div>
  <div class="col-xs-12 col-sm-12 col-md-12 col-lg-12">
   <button class="btn pull-left" (click)="clearEdit()">Back</button> <button *ngIf="drugGroupList.length>0" class="btn pull-right " (click)="storeDrugGroup()">Submit</button>
  </div>
</div>
