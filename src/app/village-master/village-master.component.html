<!-- <div *ngIf="showVillages && !editable">
    <div *ngIf="showVillages" class="col-xs-12 col-sm-12 col-md-12 col-lg-12">
        <h4>Search Villages</h4>
        <form #searForm="ngForm">
            <div class="col-xs-12 col-sm-12 col-md-3 col-lg-3">
                <md-select placeholder="State" class="width100" [(ngModel)]="searchStateID" name="searchStateID" (change)="getDistricts(searchStateID.split('-')[0]);"
                    #stateVal="ngModel">
                    <md-option *ngFor="let state of provider_states" value="{{state.stateID}}-{{state.stateName}}">
                        {{state.stateName}}
                    </md-option>
                </md-select>
            </div>
            <div class="col-xs-12 col-sm-12 col-md-3 col-lg-3">
                <md-select placeholder="District" class="width100" [(ngModel)]="searchDistrictID" name="searchDistrictID" (change)="GetTaluks(searchDistrictID.split('-')[0]);">
                    <md-option *ngFor="let district of districts" value="{{district.districtID}}-{{district.districtName}}">
                        {{district.districtName}}
                    </md-option>
                </md-select>
            </div>
            <div class="col-xs-12 col-sm-12 col-md-3 col-lg-3">
                <md-select placeholder="Taluk" class="width100" [(ngModel)]="searchTalukID" name="searchTalukID" (change)="GetBranches(searchTalukID);">
                    <md-option *ngFor="let taluk of taluks" [value]="taluk.blockID">
                        {{taluk.blockName}}
                    </md-option>
                </md-select>
            </div>
            <button class="btn">
                <md-icon mdSuffix class="mat-icon material-icons" role="img" aria-hidden="true" style="cursor: pointer" (click)="showList()">clear</md-icon>
            </button>
        </form>
    </div>
    <div class="clearfix"></div>
  <h4>Available Villages</h4>
  <table class="table ">
    <thead>
      <tr>
            <th>S No.</th>
            <th>Village</th>
            <th>PanchayatName</th>
            <th>Habitat</th>
            <th>PinCode</th>
            <th>GovVillageID</th>
            <th>GovSubDistrictID</th>
      </tr>
    </thead>
    <tbody>
      <tr style="cursor: pointer" *ngFor="let village of availableVillages | paginate: {id:'VillageListResult', itemsPerPage: 3, currentPage: b}" >
        <td>{{availableVillages.indexOf(village)+1}}</td>
        <td>{{village.villageName}}</td>
        <td>{{village.panchayatName}}</td>
        <td>{{village.habitat}}</td>
        <td>{{village.pinCode}}</td>
        <td>{{village.govVillageID}}</td>
        <td>{{village.govSubDistrictID}}</td>
        <td *ngIf="village.deleted=='0'"> <button class="btn" (click)="updateVillageStatus(village)">Deactivate</button></td>
        <td *ngIf="village.deleted=='1'"> <button class="btn activateBtn" (click)="updateVillageStatus(village)">Activate</button></td>
        <td> <button class="btn activateBtn" (click)="editVillageData(village)">Edit</button></td>
      </tr>
    </tbody>
  </table>
  <pagination-controls (pageChange)="b = $event" id="VillageListResult"></pagination-controls>
  <div>
    <button class="btn pull-right " (click)="showForm()">Add Village </button>
  </div>
</div>
<div *ngIf="editable">

</div>
<div *ngIf="!showVillages || editable">
  <h4>Create Village </h4>
  <form #VillageForm="ngForm">
    <div class="col-xs-12 col-sm-12 col-md-3 col-lg-3">
      <input mdInput style="display:none;" [(ngModel)]="districtBranchID" name="districtBranchID" >
      <md-select required placeholder="State" class="width100" [(ngModel)]="stateID" name="stateID" (change)="getDistricts(stateID.split('-')[0])" #stateVal="ngModel">
        <md-option *ngFor="let item of provider_states" value="{{item.stateID}}-{{item.stateName}}">
          {{item.stateName}}
        </md-option>
      </md-select>
      <md-hint [hidden]=stateVal.valid>
        <span class="error_text" *ngIf="!stateVal.required  && ( stateVal.dirty || stateVal.touched)">Please select State</span>
      </md-hint>
    </div>

    <div class="col-xs-12 col-sm-12 col-md-3 col-lg-3">
      <md-select required placeholder="District" class="width100" [(ngModel)]="districtID" name="districtID" #districtV="ngModel" (change)="GetTaluks(districtID.split('-')[0])" >
        <md-option *ngFor="let district of districts" value="{{district.districtID}}-{{district.districtName}}">
          {{district.districtName}}
        </md-option>
      </md-select>
      <md-hint [hidden]=districtV.valid>
        <span class="error_text" *ngIf="!districtV.required  && ( districtV.dirty || districtV.touched)">Please select District</span>
      </md-hint>
    </div>
   
    <div class="col-xs-12 col-sm-12 col-md-3 col-lg-3">
      <md-select required placeholder="Taluk/Sub District" class="width100" [(ngModel)]="blockID" name="blockID" #talukV="ngModel" (change)="GetBranches(blockID.split('-')[0]);checkExistance(talukID.split('-')[0],villageName)">
        <md-option *ngFor="let taluk of taluks" value="{{taluk.blockID}}-{{taluk.blockName}}" >
          {{taluk.blockName}}
        </md-option>
      </md-select>
      <md-hint [hidden]=talukV.valid>
        <span class="error_text" *ngIf="!talukV.required  && ( talukV.dirty || talukV.touched)">Please select Taluk</span>
      </md-hint>
    </div>

    <div class="col-xs-12 col-sm-12 col-md-3 col-lg-2">
      <md-input-container class="width100">
        <input mdInput required placeholder="Village Name" [(ngModel)]="villageName" name="villageName"  #VillageN="ngModel" (blur)="checkExistance(talukID.split('-')[0],villageName)">
        <md-hint>
          <span class="error_text" *ngIf="!VillageN.valid  && ( VillageN.dirty || VillageN.touched)">Please enter Village Name</span>
          <span class="error_text" *ngIf="VillageN.valid && villageNameExist">Village already exists</span>
        </md-hint>
      </md-input-container>
    </div>
    <div class="clearfix"></div>
    <div class="col-xs-12 col-sm-12 col-md-3 col-lg-3">
      <md-input-container class="width100">
        <input mdInput placeholder="Panchayat" [(ngModel)]="panchayatName" name="panchayatName">
      </md-input-container>
    </div>
    <div class="col-xs-12 col-sm-12 col-md-3 col-lg-3">
      <md-input-container class="width100">
        <input mdInput placeholder="Habitat" [(ngModel)]="habitat" name="habitat">
      </md-input-container>
    </div>
    <div class="col-xs-12 col-sm-12 col-md-3 col-lg-3">
      <md-input-container class="width100" myMobileNumber>
        <input mdInput placeholder="PinCode" [(ngModel)]="pinCode" name="pinCode" maxlength="6" minlength="6" #PINC="ngModel">
        <md-hint [hidden]=PINC.valid>
          <span class="error_text" *ngIf="!PINC.valid  && ( PINC.dirty || PINC.touched)">Please enter valid pincode</span>
        </md-hint>
      </md-input-container>
    </div>
    <div class="col-xs-12 col-sm-12 col-md-3 col-lg-3">
      <md-input-container class="width100">
        <input mdInput placeholder="GovVillageID" [(ngModel)]="govVillageID" name="govVillageID">
      </md-input-container>
    </div>
    <div class="clearfix"></div>
    <div class="col-xs-12 col-sm-12 col-md-3 col-lg-3">
      <md-input-container class="width100">
        <input mdInput placeholder="GovSubDistrictID" [(ngModel)]="govSubDistrictID" name="govSubDistrictID">
      </md-input-container>
    </div>
    
    <div class="col-xs-12 col-sm-12 col-md-1 col-lg-1 pull-right">
      <button *ngIf="!editable" [disabled]=" !VillageN.valid || VillageNameExist || !stateVal.valid || !districtV.valid || !talukV.valid || !PINC.valid" class="btn pull-right " 
      (click)="addVillageToList(VillageForm.value);VillageForm.reset()  ">
        <md-icon mdSuffix class="mat-icon material-icons" role="img" aria-hidden="true" style="cursor: pointer">add</md-icon>
      </button>
      <button *ngIf="editable" class="btn pull-right" (click)="updateVillageData(VillageForm.value);VillageForm.reset()"> Save</button>
    </div>
  </form>
  <div *ngIf="villageList.length>0">
    <table class="table ">
      <thead>
        <tr>
            <th>S No.</th>
            <th>Village</th>
            <th>PanchayatName</th>
            <th>Habitat</th>
            <th>PinCode</th>
            <th>GovVillageID</th>
            <th>GovSubDistrictID</th>
        </tr>
      </thead>
      <tbody>
        <tr style="cursor: pointer" *ngFor="let village of villageList | paginate: {id:'VillageResult', itemsPerPage: 2, currentPage: b}">
            <td>{{availableVillages.indexOf(village)+1}}</td>
            <td>{{village.villageName}}</td>
            <td>{{village.panchayatName}}</td>
            <td>{{village.habitat}}</td>
            <td>{{village.pinCode}}</td>
            <td>{{village.govVillageID}}</td>
            <td>{{village.govSubDistrictID}}</td>
        </tr>
      </tbody>
    </table>
    <pagination-controls (pageChange)="b = $event" id="VillageResult"></pagination-controls>
  </div>
  <div class="col-xs-12 col-sm-12 col-md-12 col-lg-12">
   <button class="btn pull-left" (click)="VillageForm.reset();clearEdit()">Back</button> <button *ngIf="villageList.length>0" class="btn pull-right " (click)="storeVillages()">Submit</button>
  </div>
</div>
 -->

<div class="row">
  <div class="col-xs-12 col-sm-12">
    <h4 class="pull-left">Village Master</h4>
  </div>
  <form id="searchFields" #searchFields="ngForm">
    <div class="col-xs-12 col-sm-12 col-md-3 col-lg-3 m-t-15">
      <md-select placeholder="State" class="width100" [disabled]="disable_flag" [(ngModel)]="searchStateID" name="searchStateID"
        (change)="getDistricts(searchStateID);" #stateVal="ngModel" required>
        <md-option *ngFor="let state of provider_states" [value]="state.stateID">
          {{state.stateName}}
        </md-option>
      </md-select>
    </div>
    <div class="col-xs-12 col-sm-12 col-md-3 col-lg-3 m-t-15">
      <md-select placeholder="District" class="width100" [disabled]="disable_flag" [(ngModel)]="searchDistrictID" name="searchDistrictID"
        (change)="GetTaluks(searchDistrictID)" required>
        <md-option *ngFor="let district of districts" [value]="district.districtID">
          {{district.districtName}}
        </md-option>
      </md-select>
    </div>
    <div class="col-xs-12 col-sm-12 col-md-3 col-lg-3 m-t-15">
      <md-select placeholder="Taluk" class="width100" [disabled]="disable_flag" [(ngModel)]="searchTalukID" name="searchTalukID"
        (change)="GetBranches(searchTalukID);" required>
        <md-option *ngFor="let taluk of taluks" [value]="taluk.blockID">
          {{taluk.blockName}}
        </md-option>
      </md-select>
    </div>
  </form>
  <!-- <div class="col-xs-12 col-sm-12 col-md-3 col-lg-3 m-t-10" *ngIf="showTableFlag">
    <button class="pull-right" md-raised-button color="primary" (click)="clear()">Clear</button>
  </div> -->
</div>
<div class="row" *ngIf="showTableFlag">
  <div class="col-xs-12 col-sm-12 col-md-12 col-lg-12 m-t-20">
    <table [md2Data]="availableVillages" #md2="md2DataTable" class="table table-striped table-hover" [rowsPerPage]="3">
      <thead>
        <tr>
          <th width="15%">Village</th>
          <th width="15%">Panchayat Name</th>
          <th width="10%">Habitat</th>
          <th width="10%">Pincode</th>
          <th width="15%">Government VillageID</th>
          <th width="20%">Government SubDistrictID</th>
          <th width="10%">Edit</th>
          <th width="15%">Action</th>
        </tr>
      </thead>
      <tbody>
        <tr *ngIf="availableVillages.length == 0">
          <td colspan="7">NO RECORD FOUND!!</td>
        </tr>
        <tr *ngFor="let item of md2.data">
          <td>{{item.villageName}}</td>
          <td>{{item.panchayatName}}</td>
          <td>{{item.habitat}}</td>
          <td>{{item.pinCode}}</td>
          <td>{{item.govVillageID}}</td>
          <td>{{item.govSubDistrictID}}</td>
          <td>
            <md-icon mdTooltip="edit" *ngIf="item.deleted=='0'" class="mat-icon material-icons" role="img" aria-hidden="true" style="cursor: pointer"
              (click)="openEditModal(item)">edit</md-icon>
          </td>
          <td>
            <button *ngIf="item.deleted=='0'" md-raised-button color="primary" (click)="updateVillageStatus(item)">Deactivate</button>
            <button *ngIf="item.deleted=='1'" md-raised-button color="primary" (click)="updateVillageStatus(item)">Activate</button>
          </td>
        </tr>
      </tbody>
      <tfoot>
        <tr>
          <td colspan="4">
            <md2-pagination></md2-pagination>
          </td>
          <td colspan="4">
            <button md-raised-button color="primary" class="pull-right" (click)="showForm()" [disabled]="!searchFields.valid">Add Village</button>
          </td>
        </tr>
      </tfoot>
    </table>
  </div>
</div>
<div class="row" *ngIf="showFormFlag">
  <form id="villageForm" #villageForm="ngForm">
    <div class="col-xs-12 col-sm-12 col-md-3 col-lg-3 m-t-10">
      <md-input-container class="width100">
        <input mdInput required placeholder="Village" [(ngModel)]="villageName" name="villageName" #VillageN="ngModel" minlength="2" maxlength="30" (keyup)="checkExistance(searchTalukID,villageName)"
          myName2>
        <md-hint>
          <span class="error_text" *ngIf="!VillageN.valid  && ( VillageN.dirty || VillageN.touched)">Please enter Village Name</span>
          <span class="error_text" *ngIf="VillageN.valid && villageNameExist">Village already exists</span>
        </md-hint>
      </md-input-container>
    </div>
    <div class="col-xs-12 col-sm-12 col-md-3 col-lg-3 m-t-10">
      <md-input-container class="width100" myName2>
        <input mdInput placeholder="Panchayat" [(ngModel)]="panchayatName" name="panchayatName" #panchayat="ngModel" minlength="2" maxlength="30">
      </md-input-container>
    </div>
    <div class="col-xs-12 col-sm-12 col-md-3 col-lg-3 m-t-10">
      <md-input-container class="width100" myName2>
        <input mdInput placeholder="Habitat" [(ngModel)]="habitat" name="habitat" minlength="2" maxlength="30" >
      </md-input-container>
    </div>
    <div class="clearfix"></div>
    <div class="col-xs-12 col-sm-12 col-md-3 col-lg-3 m-t-10">
      <md-input-container class="width100" myMobileNumber>
        <input mdInput placeholder="Pincode" [(ngModel)]="pinCode" name="pinCode" maxlength="6" minlength="6" #PINC="ngModel" required>
        <md-hint [hidden]=PINC.valid>
          <span class="error_text" *ngIf="!PINC.valid  && ( PINC.dirty || PINC.touched)">Please enter valid pincode</span>
        </md-hint>
      </md-input-container>
    </div>
    <div class="col-xs-12 col-sm-12 col-md-3 col-lg-3 m-t-10">
      <md-input-container class="width100" myMobileNumber>
        <input mdInput placeholder="Government VillageID" [(ngModel)]="govVillageID" name="govVillageID" maxlength="6" #villageID="ngModel">
        <md-hint>
          <span class="error_text" *ngIf="!villageID.valid  && ( villageID.dirty || villageID.touched)">Please enter valid village ID</span>
        </md-hint>
      </md-input-container>
    </div>

    <div class="col-xs-12 col-sm-12 col-md-3 col-lg-3 m-t-10">
      <md-input-container class="width100" myMobileNumber>
        <input mdInput placeholder="Government SubDistrictID" [(ngModel)]="govSubDistrictID" name="govSubDistrictID" maxlength="6" #districtID="ngModel">
          <md-hint [hidden]=districtID.valid>
            <span class="error_text" *ngIf="!districtID.valid  && ( districtID.dirty || districtID.touched)">Please enter valid subdistrict ID</span>
          </md-hint>
      </md-input-container>
    </div>
  </form>
  <div class="col-xs-12 col-sm-12 col-md-3 col-lg-3 m-t-10">
    <button *ngIf="villageForm.valid && !villageNameExist" md-mini-fab class="pull-right" color="primary" (click)="addVillageToList(villageForm.value);villageForm.reset()">
      <md-icon mdSuffix class="mat-icon material-icons" role="img" aria-hidden="true" style="cursor: pointer">add</md-icon>
    </button>
  </div>
  <div class="col-xs-12 col-sm-12 m-t-10" *ngIf="villageList.length>0">
    <table [md2Data]="villageList" #md2="md2DataTable" class="table table-striped table-hover" [rowsPerPage]="3">
      <thead>
        <tr>
          <th width="15%">Village</th>
          <th width="15%">PanchayatName</th>
          <th width="10%">Habitat</th>
          <th width="10%">PinCode</th>
          <th width="15%">GovVillageID</th>
          <th width="20%">GovSubDistrictID</th>
          <th width="15%">Action</th>
        </tr>
      </thead>
      <tbody>
        <tr *ngIf="availableVillages.length == 0">
          <td colspan="7">NO RECORD FOUND!!</td>
        </tr>
        <tr *ngFor="let item of md2.data">
          <td>{{item.villageName}}</td>
          <td>{{item.panchayatName}}</td>
          <td>{{item.habitat}}</td>
          <td>{{item.pinCode}}</td>
          <td>{{item.govVillageID}}</td>
          <td>{{item.govSubDistrictID}}</td>
          <td>
            <md-icon mdSuffix class="mat-icon material-icons" role="img" aria-hidden="true" style="cursor: pointer" (click)="removeObj(k)">clear</md-icon>
          </td>
        </tr>
      </tbody>
      <!-- <tfoot>
        <tr>
          <td colspan="7">
            <md2-pagination></md2-pagination>
          </td>
        </tr>
      </tfoot> -->
    </table>
  </div>
  <div class="col-xs-12 col-sm-12">
    <button class="pull-left" md-raised-button color="primary" (click)="back()">Back</button>
    <button class="pull-right" md-raised-button color="accent" [disabled]="villageList.length<1" (click)="storeVillages()">Save</button>
  </div>
</div>