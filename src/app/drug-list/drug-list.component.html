<div *ngIf="showDrugs && !editable">
  <h4>Available Drugs</h4>
  <table class="table table-striped table-hover" [md2Data]="availableDrugs" #md2="md2DataTable" [rowsPerPage]="4">
    <thead>
      <tr>
        <th width="10%">S.No.</th>
        <th width="20%">Drug Name</th>
        <th width="20%">Description</th>
        <th width="15%">Remarks</th>
        <th width="10%">Edit</th>
        <th width="20%">Action</th>
      </tr>
    </thead>
    <tbody>
      <!-- <tr style="cursor: pointer" *ngFor="let drug of availableDrugs | paginate: {id:'drugListResult', itemsPerPage: 3, currentPage: b}"> -->
      <tr *ngIf="availableDrugs.length == 0">
        <td colspan="12" align="center">No Record Found</td>
      </tr>
      <tr *ngFor="let drug of md2.data; let i= index">
        <td>{{availableDrugs.indexOf(drug)+1}}</td>
        <td>{{drug.drugName}}</td>
        <td>{{drug.drugDesc}}</td>
        <td>{{drug.remarks}}</td>
        <!-- <td>
            <button class="btn activateBtn" (click)="editDrugData(drug)">Edit</button>
          </td> -->
        <td>
          <md-icon mdTooltip="edit" class="mat-icon material-icons" role="img" aria-hidden="true" style="cursor:pointer" *ngIf="!drug.deleted"
            (click)="editDrugData(drug)">edit</md-icon>
        </td>
        <td>
          <button *ngIf="drug.deleted=='1'" md-raised-button color="primary" (click)="updateDrugStatus(drug)">Activate</button>
          <button *ngIf="drug.deleted=='0'" md-raised-button color="primary" (click)="updateDrugStatus(drug)">Deactivate</button>
        </td>
      </tr>
    </tbody>
    <tfoot>
      <tr>
        <td colspan="3">
          <md2-pagination></md2-pagination>
        </td>
        <td colspan="3" class="p-r-0 m-t-10">
          <button md-raised-button color="primary" class="pull-right" (click)="showForm()">Create Drug</button>
        </td>
      </tr>
    </tfoot>
  </table>
  <!-- <pagination-controls (pageChange)="b = $event" id="drugListResult"></pagination-controls> 
   <div>
    <button class="btn pull-right " (click)="showForm()">Add Drug </button>
  </div> -->
</div>
<div *ngIf="!showDrugs || editable">
  <h4>Create Drug</h4>
  <form #drugForm="ngForm">
    <div class="col-xs-12 col-sm-12 col-md-3 col-lg-2">
      <input mdInput style="display:none">
      <md-input-container class="width100">
        <input mdInput required placeholder="Drug Name " [(ngModel)]="drugName" name="drugName" #drugN="ngModel" minlength="1" maxlength="30">
        <md-hint>
          <span class="error_text" *ngIf="!drugN.valid  && ( drugN.dirty || drugN.touched)">Please enter drug Name</span>
          <span class="error_text" *ngIf="drugNameExist">Drug Already Exists</span>
        </md-hint>
      </md-input-container>
    </div>
    <div class="col-xs-12 col-sm-12 col-md-3 col-lg-3">
      <md-input-container class="width100">
        <input mdInput required placeholder="Drug Description" [(ngModel)]="drugDesc" name="drugDesc" #drugD="ngModel" minlength="1"
          maxlength="100">
        <md-hint [hidden]=drugD.valid>
          <span class="error_text" *ngIf="!drugD.required  && ( drugD.dirty || drugD.touched)">Please enter drug Description</span>
        </md-hint>
      </md-input-container>
    </div>
    <div class="col-xs-12 col-sm-12 col-md-3 col-lg-2">
      <md-input-container class="width100">
        <input mdInput placeholder="Remarks" [(ngModel)]="remarks" name="remarks">
      </md-input-container>
    </div>
    <div class="col-xs-12 col-sm-12 col-md-3 col-lg-2">
      <button *ngIf="!editable" md-mini-fab color="primary" [disabled]=" !drugN.valid || drugNameExist || !drugD.valid " class="pull-right "
        (click)="addDrugToList(drugForm.value);drugForm.reset()  ">
        <md-icon mdSuffix class="mat-icon material-icons" role="img" aria-hidden="true" style="cursor: pointer">add</md-icon>
      </button>
    </div>
  </form>
  <div *ngIf="drugList.length>0">
    <table [md2Data]="drugList" #md2="md2DataTable" class="table">
      <thead>
        <tr>
          <th>S.No.</th>
          <th>Drug Name</th>
          <th>Description</th>
          <th>Remarks</th>
          <th>Action</th>
        </tr>
      </thead>
      <tbody>
        <tr style="cursor: pointer" *ngFor="let drug of md2.data; let i=index">
          <td>{{drugList.indexOf(drug)+1}}</td>
          <td>{{drug.drugName}}</td>
          <td>{{drug.drugDesc}}</td>
          <td>{{drug.remarks}}</td>
          <td>
            <md-icon class="cursorPointer" mdTooltip="Remove" (click)="remove_obj(i)">clear</md-icon>
          </td>
        </tr>
      </tbody>
    </table>
    <!-- <pagination-controls (pageChange)="b = $event" id="drugsResult"></pagination-controls>  -->
  </div>
  <div class="col-xs-12 col-sm-12 col-md-12 col-lg-12">
    <button md-raised-button color="primary" class="pull-left" (click)="back()">Back</button>
    <button *ngIf="drugList.length>0" md-raised-button color="accent" class="pull-right" (click)="storedrug()">Save</button>
    <button *ngIf="editable" md-raised-button color="accent" class="pull-right" (click)="updateDrugData(drugForm.value);drugForm.reset()">Update</button>
  </div>
</div>